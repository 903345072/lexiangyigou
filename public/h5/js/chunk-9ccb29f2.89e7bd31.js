(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ccb29f2"],{"1a7a":function(a,t,i){},"34eb":function(a,t){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAYCAYAAACFms+HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YmQzMTQ1Ny01MGY2LWFmNDMtYmY4Yi1kNWRjZTMxZDg5MTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkQxODQxN0UzQzBEMTFFOTg1RjU5MzY4NjgyOTJCQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkQxODQxN0QzQzBEMTFFOTg1RjU5MzY4NjgyOTJCQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDRmMWQxNmItZTIxMC1lYzQwLWJmODYtYzE4OWRiYzNmOGYyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhiZDMxNDU3LTUwZjYtYWY0My1iZjhiLWQ1ZGNlMzFkODkxNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjImVg8AAAE3SURBVHja7JUxS0JhFIaPH7q03CUEB3HIUVxqcnEU/4O42F9oddCt/+CQ9BuiNaGmpnBssSgyCCqoxeH2nnwHC+65N8pAOC883Mvh5XC+j8P35ua7O5GIVGSpGXgpXl7Lqh73qvopgyZLZ+D2u2/FWwNdlsZgmtCzAfosDcCF0bMNRiz1AocukIokS4feIk2xpUNHpGv4dOht0k/pqUOXyCjI+pX7Y9+nN3A9FmRmmCfgHbzx35Kuxyt4BkeGbwiedBu4Kpb2wQO401XJ606DqwynvAHHGW9kCg4y+M5BK2PPE67J8srjOJZNVJANlQ/+38rzcf+ihLBI9f3E+9uegSFRJ5FxSE3ODimnXIgm5yGpGT5NzlPSSOmpyXlP2p6cnpyenP6O++CenJ6cnpyenGtIzg8BBgD9k45TMQlA3wAAAABJRU5ErkJggg=="},3946:function(a,t,i){"use strict";i.r(t);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"bargain"},[n("div",{class:[a.bargainPartake!=a.userInfo.uid?"header on":"header"]},[n("div",{staticClass:"people"},[a._v("\n      "+a._s(a.lookCount)+"人查看 丨 "+a._s(a.shareCount)+"人分享 丨 "+a._s(a.userCount)+"人参与\n    ")]),a.bargainPartake!=a.userInfo.uid?n("div",{staticClass:"pictxt acea-row row-center-wrapper"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:a.bargainUserInfo.avatar}})]),n("div",{staticClass:"text"},[a._v("\n        "+a._s(a.bargainUserInfo.nickname)+"\n        "),n("span",[a._v("邀请您帮忙砍价")])])]):n("CountDown",{attrs:{"is-day":!0,"tip-text":"倒计时 ","day-text":" 天 ","hour-text":" 时 ","minute-text":" 分 ","second-text":" 秒",datatime:a.datatime}})],1),n("div",{staticClass:"wrapper"},[n("div",{staticClass:"pictxt acea-row row-between-wrapper",on:{click:a.openAlone}},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:a.bargain.image}}),a._m(0)]),n("div",{staticClass:"text acea-row row-column-around"},[n("div",{staticClass:"line2",domProps:{textContent:a._s(a.bargain.title)}}),n("div",{staticClass:"money font-color-red"},[a._v("\n          已砍至: ￥\n          "),n("span",{staticClass:"num",domProps:{textContent:a._s(a.price)}})]),n("div",{staticClass:"acea-row row-middle"},[n("div",{staticClass:"successNum",domProps:{textContent:a._s("原价"+a.bargain.price)}}),n("div",{staticClass:"successNum",domProps:{textContent:a._s("已有"+a.bargainSumCount+"人砍价成功")}})])])]),n("div",{staticClass:"cu-progress acea-row row-middle round margin-top"},[n("div",{staticClass:"acea-row row-middle bg-red",style:{width:a.loading?a.pricePercent+"%":""}})]),n("div",{staticClass:"balance acea-row row-between-wrapper"},[n("div",{domProps:{textContent:a._s("已砍"+a.alreadyPrice+"元")}}),0===a.surplusPrice?n("div",[a._v("砍价成功")]):n("div",{domProps:{textContent:a._s("还剩"+a.surplusPrice+"元")}})]),a.bargainPartake==a.userInfo.uid||a.statusUser||a.helpListLoading?a._e():n("div",{staticClass:"bargainSuccess"},[n("span",{staticClass:"iconfont icon-xiaolian"}),a._v("已成功帮助好友砍价\n    ")]),0===a.surplusPrice&&a.bargainPartake===a.userInfo.uid&&1===a.userBargainStatus&&a.dargainQuota>0&&a.productstock>0&&!a.helpListLoading?n("div",{staticClass:"bargainSuccess"},[n("span",{staticClass:"iconfont icon-xiaolian"}),a._v("恭喜您砍价成功，快去支付吧~\n    ")]):a._e(),0==a.userBargainStatus&&a.bargainPartake===a.userInfo.uid?n("div",{class:a.dargainQuota>0&&a.productstock>0?"bargainBnt":"bargainBnt_hui",on:{click:a.goParticipate}},[a._v("\n      立即参与砍价\n    ")]):a._e(),a.surplusPrice>0&&a.bargainPartake===a.userInfo.uid&&1===a.userBargainStatus&&!a.helpListLoading?n("div",{staticClass:"bargainBnt",on:{click:a.goPoster}},[a._v("\n      邀请好友帮砍价\n    ")]):a.bargainPartake!=a.userInfo.uid&&1==a.userBargainStatus&&a.statusUser&&!a.helpListLoading?n("div",{staticClass:"bargainBnt",on:{click:a.getBargainHelp}},[a._v("\n      帮好友砍一刀\n    ")]):a._e(),a.bargainPartake==a.userInfo.uid||a.statusUser||a.helpListLoading?a._e():n("div",{staticClass:"bargainBnt",on:{click:a.getBargainStart}},[a._v("\n      我也要参与\n    ")]),0===a.surplusPrice&&a.bargainPartake===a.userInfo.uid&&1===a.userBargainStatus&&a.dargainQuota>0&&a.productstock>0?n("div",{staticClass:"bargainBnt",on:{click:a.goPay}},[a._v("\n      立即支付\n    ")]):a._e(),n("div",{staticClass:"bargainBnt on",on:{click:a.goList}},[a._v("抢更多商品")]),n("div",{staticClass:"tip"},[a._v("\n      已有\n      "),n("span",{staticClass:"font-color-red",domProps:{textContent:a._s(a.helpCount)}}),a._v("\n      位好友成功帮您砍价\n    ")]),n("div",{staticClass:"lock"})]),n("div",{staticClass:"bargainGang"},[a._m(1),n("div",{staticClass:"list"},a._l(a.bargainHelpList,function(t,i){return n("div",{key:i,staticClass:"item acea-row row-between-wrapper"},[n("div",{staticClass:"pictxt acea-row row-between-wrapper"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:t.avatar}})]),n("div",{staticClass:"text"},[n("div",{staticClass:"name line1",domProps:{textContent:a._s(t.nickname)}}),n("div",{staticClass:"line1",domProps:{textContent:a._s(t.add_time)}})])]),n("div",{staticClass:"money font-color-red"},[n("span",{staticClass:"iconfont icon-kanjia"}),a._v("\n          砍掉"+a._s(t.price)+"元\n        ")])])}),0),a.helpListStatus||a.helpListLoading?a._e():n("div",{staticClass:"load font-color-red",on:{click:a.getBargainHelpList}},[a._v("\n      点击加载更多\n    ")]),n("div",{staticClass:"lock"})]),n("div",{staticClass:"goodsDetails"},[a._m(2),n("div",{staticClass:"conter",domProps:{innerHTML:a._s(a.bargain.rule)}}),n("div",{staticClass:"lock"})]),n("div",{staticClass:"goodsDetails"},[a._m(3),n("div",{staticClass:"conter",domProps:{innerHTML:a._s(a.bargain.description)}})]),n("div",{staticClass:"bargainTip",class:!0!==a.active||a.helpListLoading?"":"on"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:i("4fb4")}}),n("div",{staticClass:"iconfont icon-guanbi",on:{click:a.close}})]),a.bargainPartake===a.userInfo.uid?n("div",{staticClass:"cutOff"},[a._v("\n      您已砍掉\n      "),n("span",{staticClass:"font-color-red",domProps:{textContent:a._s(a.bargainHelpPrice)}}),a._v("元，听说分享次数越多砍价成功的机会越大哦！\n    ")]):a._e(),a.bargainPartake!==a.userInfo.uid?n("div",{staticClass:"cutOff on"},[n("div",{staticClass:"help font-color-red",domProps:{textContent:a._s("成功帮砍"+a.bargainHelpPrice+"元")}}),a._v("\n      ，您也可以砍价低价拿哦，快去挑选心仪的商品吧~\n    ")]):a._e(),a.bargainPartake===a.userInfo.uid?n("div",{staticClass:"tipBnt",on:{click:a.goPoster}},[a._v("\n      邀请好友帮砍价\n    ")]):n("div",{staticClass:"tipBnt",on:{click:a.getBargainStart}},[a._v("我也要参与")])]),n("div",{staticClass:"mask",attrs:{hidden:!1===a.active},on:{touchmove:function(a){a.preventDefault()},click:a.close}})])},e=[function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"bargain_view"},[a._v("\n          查看商品\n          "),i("span",{staticClass:"iconfont icon-jiantou iconfonts"})])},function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"title font-color-red acea-row row-center-wrapper"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:i("34eb")}})]),n("div",{staticClass:"titleCon"},[a._v("砍价帮")]),n("div",{staticClass:"pictrue on"},[n("img",{attrs:{src:i("34eb")}})])])},function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"title font-color-red acea-row row-center-wrapper"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:i("34eb")}})]),n("div",{staticClass:"titleCon"},[a._v("活动规则")]),n("div",{staticClass:"pictrue on"},[n("img",{attrs:{src:i("34eb")}})])])},function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"title font-color-red acea-row row-center-wrapper"},[n("div",{staticClass:"pictrue"},[n("img",{attrs:{src:i("34eb")}})]),n("div",{staticClass:"titleCon"},[a._v("商品详情")]),n("div",{staticClass:"pictrue on"},[n("img",{attrs:{src:i("34eb")}})])])}],r=(i("a481"),i("7f7f"),i("5608")),s=i("ca41"),o=i("73f5"),c=i("2f62"),g=i("74f9"),u=i("ed08"),d="DargainDetails",l={name:"DargainDetails",components:{CountDown:r["a"]},props:{},data:function(){return{isIcan:!1,price:0,bargainId:0,bargainPartake:0,bargain:[],bargainSumCount:0,activeMsg:"",active:!1,loading:!1,datatime:0,lookCount:0,shareCount:0,userCount:0,bargainHelpPrice:0,bargainHelpList:[],helpListStatus:!1,helpListLoading:!0,page:1,limit:2,helpCount:0,surplusPrice:0,alreadyPrice:0,pricePercent:0,bargainUserInfo:[],userBargainStatus:2,dargainQuota:0,productstock:0,bargainNum:0,statusUser:!1}},computed:Object(c["b"])(["userInfo","isLogin"]),watch:{$route:function(a){var t=this;a.name===d&&t.mountedStart()}},mounted:function(){var a=this;a.mountedStart(),setTimeout(function(){a.loading=!0},500)},methods:{goParticipate:function(){this.dargainQuota>0&&this.productstock>0&&(this.bargainPartake===this.userInfo.uid?this.getBargainStart():this.getBargainStartUser(),this.getBargainHelpCount())},openAlone:function(){this.$router.replace({path:"/detail/"+this.bargain.product_id})},mountedStart:function(){var a=this;a.bargainId=a.$route.params.id;var t=parseInt(a.$route.params.partake);void 0===t||t<=0||isNaN(t)?(a.bargainPartake=a.userInfo.uid,a.$router.replace({path:"/activity/dargain_detail/"+a.bargainId+"/"+a.bargainPartake})):a.bargainPartake=parseInt(t),a.getBargainHelpCountStart(),a.getBargainDetail(),a.getBargainShare(0),a.bargainPartake!==a.userInfo.uid&&a.getBargainStartUser()},setOpenShare:function(){var a=this,t={desc:"您的好友"+a.userInfo.nickname+"邀请您砍价",title:a.bargain.title,link:window.location.protocol+"//"+window.location.host+a.$router.currentRoute.path,imgUrl:a.bargain.image},i={title:"您的好友"+a.userInfo.nickname+"邀请您砍价"+a.bargain.title,link:window.location.protocol+"//"+window.location.host+a.$router.currentRoute.path,imgUrl:a.bargain.image};!0===Object(u["d"])()&&Object(g["ready"])().then(function(){Object(g["openShareAppMessage"])(t),Object(g["openShareTimeline"])(i)})},updateTitle:function(){document.title=this.bargain.title||this.$route.meta.title},goPay:function(){var a=this,t={},i=this;t.productId=i.bargain.product_id,t.cartNum=i.bargain.num,t.uniqueId="",t.bargainId=i.bargainId,t.new=1,Object(o["m"])(t).then(function(a){i.$router.push({path:"/order/submit/"+a.data.cartId})}).catch(function(t){a.$dialog.error(t.msg)})},goPoster:function(){var a=this;a.getBargainShare(a.bargainId),this.$router.push({path:"/activity/poster/"+a.bargainId+"/2"})},goList:function(){this.$router.push({path:"/activity/bargain"})},getBargainShare:function(a){var t=this;Object(s["h"])({bargainId:a}).then(function(a){t.lookCount=a.data.lookCount,t.shareCount=a.data.shareCount,t.userCount=a.data.userCount})},getBargainDetail:function(){var a=this;Object(s["a"])(a.bargainId).then(function(t){a.$set(a,"bargain",t.data.bargain),a.dargainQuota=a.bargain.attr.quota||0,a.productstock=a.bargain.attr.product_stock?a.bargain.attr.product_stock:0,a.bargainNum=a.bargain.bargain_num,a.updateTitle(),a.datatime=a.bargain.stop_time,a.getBargainHelpCount(),a.setOpenShare()}).catch(function(t){a.$dialog.error(t.msg),a.$router.go(-1)})},getBargainStart:function(){var a=this;Object(s["i"])({bargainId:a.bargainId}).then(function(){a.bargainPartake=a.userInfo.uid,a.setOpenShare(),a.getBargainHelp()}).catch(function(t){a.$dialog.error(t.msg)})},getBargainHelp:function(){var a=this;if(0===a.surplusPrice&&a.bargainPartake!==a.userInfo.uid)return a.$dialog.success("好友已经砍价成功");var t={bargainId:a.bargainId,bargainUserUid:a.bargainPartake};Object(s["b"])(t).then(function(t){if(a.activeMsg=t.data.status,"SUCCESSFUL"===t.data.status&&a.bargainPartake!==a.userInfo.uid)return a.$dialog.toast({mes:"您已经砍过了"});a.getBargainHelpPrice(),a.helpListStatus=!1,a.page=1,a.bargainHelpList=[]}).catch(function(t){a.$dialog.error(t.msg)})},getBargainHelpPrice:function(){var a=this;a.helpListLoading=!0,Object(s["e"])({bargainId:a.bargainId,bargainUserUid:a.bargainPartake}).then(function(t){switch(a.bargainHelpPrice=t.data.price,a.helpListLoading=!1,a.getBargainHelpCount(),a.getBargainHelpList(),a.activeMsg){case"SUCCESSFUL":break;case"SUCCESS":a.active=!0;break}}).catch(function(t){a.$dialog.error(t.msg)})},getBargainHelpList:function(){var a=this;!0!==a.helpListLoading&&!0!==a.helpListStatus&&(a.helpListLoading=!0,Object(s["d"])({bargainId:a.bargainId,bargainUserUid:a.bargainPartake,page:a.page,limit:a.limit}).then(function(t){a.helpListStatus=t.data.length<a.limit,a.helpListLoading=!1,a.page++,a.bargainHelpList.push.apply(a.bargainHelpList,t.data)}).catch(function(t){a.$dialog.error(t.msg)}))},getBargainHelpCountStart:function(){var a=this;Object(s["c"])({bargainId:a.bargainId,bargainUserUid:a.bargainPartake}).then(function(){}).catch(function(){a.$router.push({path:"/activity/dargain_detail/"+a.bargainId+"/"+a.userInfo.uid})})},getBargainHelpCount:function(){var a=this;Object(s["c"])({bargainId:a.bargainId,bargainUserUid:a.bargainPartake}).then(function(t){a.userBargainStatus=t.data.status,a.helpCount=t.data.count,a.surplusPrice=t.data.price,a.alreadyPrice=t.data.alreadyPrice,a.pricePercent=t.data.pricePercent,a.statusUser=t.data.userBargainStatus,a.price=(a.bargain.price-a.alreadyPrice).toFixed(2),a.helpListLoading=!1}).catch(function(){a.bargainPartake=a.userInfo.uid,a.$router.push({path:"/activity/dargain_detail/"+a.bargainId+"/"+a.userInfo.uid})})},getBargainStartUser:function(){var a=this;Object(s["j"])({bargainId:a.bargainId,bargainUserUid:a.bargainPartake}).then(function(t){a.bargainUserInfo=t.data,a.getBargainHelpList()}).catch(function(t){a.$dialog.error(t.msg)})},close:function(){this.active=!1}}},p=l,b=(i("b088"),i("2877")),v=Object(b["a"])(p,n,e,!1,null,"564f6b78",null);t["default"]=v.exports},"4fb4":function(a,t,i){a.exports=i.p+"h5/img/bargainBg.08e23e65.jpg"},b088:function(a,t,i){"use strict";var n=i("1a7a"),e=i.n(n);e.a}}]);
//# sourceMappingURL=chunk-9ccb29f2.89e7bd31.js.map